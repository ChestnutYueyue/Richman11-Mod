## Monopoly Card Modifier 插件说明文档

### 插件概述

Monopoly Card Modifier 插件是一个用于修改《大富翁11》游戏中卡牌和金钱功能的工具。通过该插件，玩家可以在游戏过程中轻松管理卡牌、修改玩家的金钱以及启用免费消费等功能。插件为玩家提供了一个方便的窗口界面来输入和显示卡牌ID、金钱数值以及其他配置。

### 功能

1. **卡牌ID管理**：允许玩家通过界面输入卡牌ID，并对卡牌进行解锁/锁定操作。
2. **玩家金钱管理**：允许玩家在游戏中修改其金钱数值，限制输入最大值为9位数。
3. **免费消费**：启用或禁用“免费消费”功能，使玩家在游戏过程中无需支付费用。
4. **卡牌信息显示**：在窗口中显示所有卡牌的ID、名称和说明信息。
5. **日志系统**：记录插件的操作日志，并在窗口中显示，方便玩家进行调试和查看操作历史。
6. **Harmony 补丁系统**：通过 Harmony 库实现对游戏函数的补丁，修改卡牌、金钱等游戏状态。

---

### 安装说明

1. 下载并解压 `MonopolyCardModifier` 插件。
2. 将插件文件放入 `BepInEx` 插件文件夹中。
3. 启动《大富翁》游戏，插件会自动加载。
4. 按下 `F1` 键打开插件界面。

---

### 插件功能详解

#### 1. 卡牌管理
通过插件界面，玩家可以输入卡牌ID并对其进行“锁定”或“解锁”操作。

- **输入卡牌ID**：玩家可以输入一个或多个卡牌ID，卡牌ID之间使用逗号、空格等分隔符。
- **卡牌锁定/解锁**：当启用锁定功能时，玩家只能使用输入的卡牌ID，其他卡牌被禁用。

#### 2. 玩家金钱管理
玩家可以通过界面修改金钱数值：

- **输入金钱数值**：允许玩家输入最大9位数字，修改当前的金钱。
- **金钱修改按钮**：当点击“修改”按钮时，会根据输入的数值更新玩家金钱；点击“取消”按钮可以取消当前修改。

#### 3. 免费消费功能
通过界面控制是否启用“免费消费”功能，启用后，玩家在游戏中的所有消费（如购买卡牌、使用道具等）将不再扣除金钱。

- **开启/关闭免费消费**：点击按钮开启或关闭该功能。
- **控制免费消费状态**：玩家可以根据需要随时切换。

#### 4. 卡牌信息显示
插件会实时显示所有卡牌的ID、名称和说明，玩家可以通过该功能查看所有卡牌的信息。

- **显示卡牌ID、名称、说明**：在界面中显示卡牌的相关信息。
- **信息格式**：每行显示卡牌的ID、名称和说明信息，按照固定的列宽对齐。

#### 5. 日志系统
插件内置日志功能，记录插件的操作历史，并在界面中显示。日志信息包括玩家操作（如修改金钱、切换功能等）的时间戳。

- **日志条数限制**：日志会显示最近的20条记录，超过限制的日志会被自动删除。
- **清除日志功能**：玩家可以通过点击“清除日志”按钮来清空当前的日志。

---

### Harmony 补丁系统

插件使用 **Harmony** 库来修改游戏中的函数。通过补丁机制，我们能够：

- 修改卡牌的管理功能，允许玩家锁定和解锁卡牌。
- 修改金钱相关函数，支持阻止金钱扣除、修改玩家金钱等操作。
- 修改银行操作，防止错误的金钱扣除。

#### 补丁方法：
- **BattleBaseInfo.DelCard**：锁定卡牌并禁止卡牌删除操作。
- **BattleBaseInfo.ChangeMoney2**：拦截金钱变动，允许修改或禁止金钱扣除。
- **BattleBaseInfo.ChangeBank2**：监控银行操作，防止在启用免费消费时错误扣除金钱。

---

### 日志系统使用

1. **启用日志功能**：在插件的 `Start()` 方法中，日志系统会启用并显示调试信息。
2. **显示日志信息**：插件界面中会显示最新的20条日志记录，帮助玩家跟踪插件的使用情况。
3. **清除日志**：玩家可以点击“清除日志”按钮，清空当前的日志记录。

---

### 快捷键

- **F1**：切换插件窗口的显示或隐藏。
- **输入卡牌ID、玩家金钱**：通过界面输入相应内容来修改卡牌或金钱。
- **点击按钮**：执行锁定/解锁、修改金钱等操作。

---

### 常见问题

#### 1. 为什么金钱无法修改？
- 请确保插件的“免费消费”功能已经启用，或者检查金钱输入框的限制是否正确。

#### 2. 卡牌ID锁定没有生效？
- 请检查卡牌ID输入框中的ID是否正确，确保没有多余的空格或分隔符。

#### 3. 如何清除日志？
- 在日志显示区域右上角有一个“清除日志”按钮，点击即可清除所有日志。

---

### 插件开发者日志

- **版本 1.0**：插件首次发布，支持卡牌ID管理、金钱修改、免费消费功能、卡牌信息显示和日志功能。
- **版本 1.1**：优化了日志系统，增强了UI显示功能。

---

### 许可协议

Monopoly Card Modifier 插件是一个开源项目，允许玩家自由使用和修改。请遵循开源许可协议并尊重其他开发者的工作。

---

### 联系我们

如果你有任何问题或建议，可以通过以下方式与我们联系：

- 电子邮件：[952134128@qq.com](mailto:952134128@qq.com)
- GitHub：[https://github.com/ChestnutYueyue/Richman11-Mod](https://github.com/ChestnutYueyue/Richman11-Mod)

感谢使用 Monopoly Card Modifier 插件！希望你在游戏中取得更多乐趣！

--- 

**插件版本：** 1.1  
**插件开发者：** 栗悦棠